---
// src/components/Header.astro
import { supabase } from '../lib/supabaseClient.js';

const { isLoggedIn } = Astro.props;
let profileLink = "/perfil";
let logoutUrl = "/login";
---

<header class="fixed top-0 left-0 w-full z-50">
Â  Â  <div class="py-6 px-6 border-b" style="background: linear-gradient(180deg, #f8f5f0 0%, #f2ede6 50%, #ede7dc 100%); border-color: #e5ddd0; box-shadow: 0 6px 30px rgba(0, 0, 0, 0.15);">
Â  Â  Â  Â  <nav class="container mx-auto flex items-center justify-between">
Â  Â  Â  Â  Â  Â  <div class="flex items-center space-x-12">
Â  Â  Â  Â  Â  Â  Â  Â  <a href="/" class="flex items-center space-x-4 transition-colors duration-300" style="color: #2c2c2c;" onmouseover="this.style.color='#e50914'" onmouseout="this.style.color='#2c2c2c'">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background-color: #e50914;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-white font-bold text-lg">ðŸŽ¬</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-3xl font-bold tracking-wide">UVK CINES</span>
Â  Â  Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  Â  Â  <ul class="flex items-center space-x-10 font-semibold text-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li class="relative">
                        <a href="/" class="pb-4 transition-all duration-300 border-b-3 border-transparent hover:border-red-500" style="color: #2c2c2c;" onmouseover="this.style.color='#e50914'; this.style.borderColor='#e50914'; this.style.transform='translateY(-2px)'" onmouseout="this.style.color='#2c2c2c'; this.style.borderColor='transparent'; this.style.transform='translateY(0px)'">Cartelera</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>
                        <a href="/alimentos-bebidas" class="pb-4 transition-all duration-300 border-b-3 border-transparent hover:border-red-500" style="color: #2c2c2c;" onmouseover="this.style.color='#e50914'; this.style.borderColor='#e50914'; this.style.transform='translateY(-2px)'" onmouseout="this.style.color='#2c2c2c'; this.style.borderColor='transparent'; this.style.transform='translateY(0px)'">Alimentos y Bebidas</a>
                    </li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>
                        <a href="/promociones" class="pb-4 transition-all duration-300 border-b-3 border-transparent hover:border-red-500" style="color: #2c2c2c;" onmouseover="this.style.color='#e50914'; this.style.borderColor='#e50914'; this.style.transform='translateY(-2px)'" onmouseout="this.style.color='#2c2c2c'; this.style.borderColor='transparent'; this.style.transform='translateY(0px)'">Promociones</a>
                    </li>
Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <ul class="flex items-center space-x-8 font-semibold">
Â  Â  Â  Â  Â  Â  Â  Â  {isLoggedIn ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li class="relative">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href={profileLink} class="p-3 rounded-full transition-all duration-300" style="color: #2c2c2c; background-color: transparent;" onmouseover="this.style.color='#e50914'; this.style.backgroundColor='rgba(229, 9, 20, 0.1)'; this.style.transform='scale(1.1)'" onmouseout="this.style.color='#2c2c2c'; this.style.backgroundColor='transparent'; this.style.transform='scale(1)'">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="logout-button" class="text-white py-3 px-8 rounded-full font-semibold transition-all duration-300 shadow-xl text-lg" style="background: linear-gradient(135deg, #e50914 0%, #b91c1c 100%);" onmouseover="this.style.background='linear-gradient(135deg, #b91c1c 0%, #991b1b 100%)'; this.style.transform='translateY(-3px) scale(1.05)'; this.style.boxShadow='0 10px 25px rgba(229, 9, 20, 0.4)'" onmouseout="this.style.background='linear-gradient(135deg, #e50914 0%, #b91c1c 100%)'; this.style.transform='translateY(0px) scale(1)'; this.style.boxShadow='0 6px 15px rgba(229, 9, 20, 0.3)'">Cerrar SesiÃ³n</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="/login" class="text-white py-3 px-8 rounded-full font-semibold transition-all duration-300 shadow-xl text-lg" style="background: linear-gradient(135deg, #e50914 0%, #b91c1c 100%);" onmouseover="this.style.background='linear-gradient(135deg, #b91c1c 0%, #991b1b 100%)'; this.style.transform='translateY(-3px) scale(1.05)'; this.style.boxShadow='0 10px 25px rgba(229, 9, 20, 0.4)'" onmouseout="this.style.background='linear-gradient(135deg, #e50914 0%, #b91c1b 100%)'; this.style.transform='translateY(0px) scale(1)'; this.style.boxShadow='0 6px 15px rgba(229, 9, 20, 0.3)'">Iniciar SesiÃ³n</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  </nav>
Â  Â  </div>
</header>

<script>
Â  Â  import { supabase } from '../lib/supabaseClient.js';
Â  Â Â 
Â  Â  document.getElementById('logout-button')?.addEventListener('click', async (e) => {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const { error } = await supabase.auth.signOut();
Â  Â  Â  Â  if (!error) {
Â  Â  Â  Â  Â  Â  window.location.href = '/login';
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  console.error('Error al cerrar sesiÃ³n:', error);
Â  Â  Â  Â  }
Â  Â  });
</script>