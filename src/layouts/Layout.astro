---
// src/layouts/Layout.astro
import { supabase } from '../lib/supabaseClient.js';
import Header from '../components/Header.astro';
import '../styles/global.css';

const { data: { session } } = await supabase.auth.getSession();
const isLoggedIn = !!session;

export interface Props {
  title: string;
}

const { title } = Astro.props;

const currentPath = Astro.url.pathname.toLowerCase();
const hideHeader = currentPath.startsWith('/login') || currentPath.startsWith('/registro');
---

<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title}</title>
</head>
<body style="background-color: #0f0f0f !important; color: #ffffff !important; margin: 0; padding: 0;">
    { !hideHeader && <Header isLoggedIn={isLoggedIn} /> }
    <slot />
</body>
</html>

<style>
    body {
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* Asegurar que no hay espacios en blanco */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    html, body {
        height: 100%;
        overflow-x: hidden;
    }
</style>